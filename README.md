# 运用模拟退火算法解决简单矩形布局问题
随着工艺的发展，集成电路设计越来越多的需要计算机辅助，计算机数据结构和计算方法的合适使用
可以使得设计事半功倍。所以，了解和理解数据结构和算法日益成为集成电路设计人员的基本知识结
构的一部分。本文是关于复现设计数据结构用SA算法实现布局并用benchmark检验的论文。

## 论文解读

布局问题是一个著名的NP完全问题（NP问题：非确定性多项式时间可解的判定问题，一
开始笔者对这段文字很是疑惑，究竟什么是NP问题？我们先看针对NP问题的算法，其实
可以分为两部分来看，第一部分是猜测阶段，它是非确定性的，而第二部分是验证阶段，
它则是确定的，就好比推导大质数的问题，我们并没有一个公式能推导出很大的质数，
只能通过穷举法，这就是猜测阶段，我们并不知道下一个质数会是几，它并没有规律，
只能靠我们的猜测，而我们对我们列举的数字进行验证其是否为质数，这个过程则是
确定性的）。 <br />
对于布局问题，在芯片中，一两个模块还好办，一旦模块多了起来，几十个、甚至上
百个，也没有一条公式告诉我们哪个模块应该放置在何处，于是就需要我们进行“猜”，
也就是穷举，只要时间足够多，我们穷举的情况足够多，我们就一定能找出来一种布局
情况，使得这个布局最合理，面积占用最小，这样子可以大大降低芯片的成本，提高面
积利用率，降低芯片内部模块之间的延迟… <br />
但是我们进行猜测的时候，并不能瞎猜，如果瞎猜的话，非常浪费时间，而且也不一
定解的出来，我们要引导计算机向着我们特定的方向进行猜测，于是就有了我们的模拟退
火算法，利用模拟退火算法来解决我们的布局问题。

## 基本布局问题

对于不考虑通信优先权的基本布局问题，我们只需要考虑最终占用的整个包络的面积
尽可能地小即可，在本次大作业中，我们进行的就是不需考虑通信优先权的基本布局问题，
不需要考虑各个模块之间的通信的代价（即引脚和线网的布置对通信的影响）。 

## 模拟退火算法

模拟退火算法的思想最早在1953年由Metropolis提出，1983年被 Kirkpatrick 等
人成功引入组合优化领域。模拟退火算法是将物理过程与组合优化相结合的一种随机迭代
寻优算法,模拟固体退火的过程,在局部范围内搜索最优解。固体退火过程分为两个阶段:①
加热至熔融;②退火阶段。在温度 T,分子停留在状态 r 的概率满足 Boltzmann 分布，具体
可以查询一下相关的论文，笔者的程度较浅，只能大致介绍一下。<br />
模拟退火算法中有下面四个关键因素:

1. 初始温度的选择;
2. 温度下降策略;
3. 每一温度下的迭代长度;
4. 算法终止规则。

以上四个因素的不同选择都会影响模拟退火的最终优化结果, 其中以每一温度下的迭代长度
和温度下降系数的影响最大。这些关键因素的选择必须以大量的实验事实为基础。<br />

传统的模拟退火过程是一个单向的退火-温度下降过程,直到满足算法的终止规则为止。
在我们的程序中对传统的模拟退火算法在两方面进行了改进: 
1. 在退火过程中用一个最优值记录器记录搜索到的最优解,以避免最优解的丢失; 
2. 加入了回火过程。在每次退火结束后,用当前计算结果为初始解,并将温度再次升高(但比上一次的温度低),再一次进行退火。采用回火策略有利于跳出局部最最优的“陷阱”

##  Sequence Pair

Sequence Pair是指在一个矩形块布局中, 所有矩形块的两个排列构成的序列对。它
用两个包含模块单元相互位置关系的序列对(X,Y)来确定一个布局。序列对通过两组正步线
来产生两个所有矩形模块的排列:正序列 X 和负序列 Y。正序列描述的是序列中前面模块
在后面模块左边或者上边的关系; 负序列描述的是序列中前面模块在后面模块左边或者下
边的关系。

## LCS快速算法





